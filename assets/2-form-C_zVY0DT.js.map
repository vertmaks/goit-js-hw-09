{"version":3,"file":"2-form-C_zVY0DT.js","sources":["../../src/js/form-errors.js","../../src/js/refs.js","../../src/js/form-check-logic.js","../../src/js/2-form.js"],"sourcesContent":["export const emailErrorMsg = `<div class=\"form-email-error-msg\">Please, enter correct email</div>`;\nexport const emptyErrorMsg = `<div class=\"form-error-empty-msg is-onscreen\">This field is required</div>`;\n","export let refs = {\n  form: document.querySelector('.feedback-form'),\n  emailInput: document.getElementById('userEmail'),\n  textInput: document.getElementById('userMsg'),\n  emailErrorMsg: document.querySelector('.form-email-error-msg'),\n  emptyErrorMsg: document.querySelector('.form-error-empty-msg'),\n};\n","import { emailErrorMsg, emptyErrorMsg } from './form-errors';\nimport { refs } from './refs';\n\nlet msgTimeoutId = null;\nlet emailTimeoutId = null;\n\nexport function emailCheck() {\n  const correctEmailRule = emailInput.value.match(\n    /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/\n  );\n\n  const existingError = refs.emailInput.parentElement.querySelector(\n    '.form-email-error-msg'\n  );\n  if (existingError) existingError.remove();\n\n  if (refs.emailInput.value === '') {\n    refs.emailInput.style.borderColor = 'tomato';\n\n    //   insert empty error to HTML!\n    refs.emailInput.insertAdjacentHTML('afterend', emptyErrorMsg);\n    const emptyMsg = refs.emailInput.parentElement.querySelector(\n      '.form-error-empty-msg'\n    );\n    errorMsg.classList.add('is-onscreen');\n\n    // old example\n    // emailEmptyError.classList.remove('visually-hidden');\n    // emailEmptyError.classList.add('is-onscreen');\n    // emailErrorMsg.classList.remove('is-onscreen');\n\n    if (emailTimeoutId) clearTimeout(emailTimeoutId);\n    emailTimeoutId = setTimeout(() => {\n      refs.emailInput.style.borderColor = '';\n\n      // remove empty error from HTML!\n      emptyMsg.classList.remove('is-onscreen');\n      emptyMsg.remove();\n\n      // old example\n      //   emailEmptyError.classList.remove('is-onscreen');\n      //   emailEmptyError.classList.add('visually-hidden');\n    }, 5000);\n\n    return false;\n  } else if (!correctEmailRule) {\n    refs.emailInput.style.borderColor = 'tomato';\n\n    //   insert ivalid email error to HTML\n    refs.emailInput.insertAdjacentHTML('afterend', emailErrorMsg);\n    const errorMsg = refs.emailInput.parentElement.querySelector(\n      '.form-email-error-msg'\n    );\n    errorMsg.classList.add('is-onscreen');\n\n    //   old example\n    // emailErrorMsg.classList.remove('visually-hidden');\n    // emailErrorMsg.classList.add('is-onscreen');\n    // emailEmptyError.classList.remove('is-onscreen');\n\n    if (emailTimeoutId) clearTimeout(emailTimeoutId);\n    emailTimeoutId = setTimeout(() => {\n      refs.emailInput.style.borderColor = '';\n\n      // remove ivalid email error from HTML\n      errorMsg.classList.remove('is-onscreen');\n      errorMsg.remove();\n\n      // old example\n      //   emailErrorMsg.classList.remove('is-onscreen');\n      //   emailErrorMsg.classList.add('visually-hidden');\n    }, 5000);\n\n    return false;\n  } else {\n    emailInput.style.borderColor = '';\n\n    //   don't add enything!\n    //   old!\n    // emailErrorMsg.classList.remove('is-onscreen');\n    // emailEmptyError.classList.remove('is-onscreen');\n\n    if (emailTimeoutId) clearTimeout(emailTimeoutId);\n\n    return true;\n  }\n}\n\nexport function msgCheck() {\n  const existingError = refs.textInput.parentElement.querySelector(\n    '.form-error-empty-msg'\n  );\n  if (existingError) existingError.remove();\n\n  if (refs.textInput.value.trim() === '') {\n    refs.textInput.style.borderColor = 'tomato';\n\n    //   insert empty HTML error!\n    refs.textInput.insertAdjacentHTML('afterend', emptyErrorMsg);\n    const emptyMsg = refs.textInput.parentElement.querySelector(\n      '.form-error-empty-msg'\n    );\n    emptyMsg.classList.add('is-onscreen');\n\n    //   old\n    // nameEmptyError.classList.remove('visually-hidden');\n    // nameEmptyError.classList.add('is-onscreen');\n\n    if (msgTimeoutId) clearTimeout(msgTimeoutId);\n    msgTimeoutId = setTimeout(() => {\n      refs.textInput.style.borderColor = '';\n\n      // remove empty HTML error!\n      emptyMsg.classList.remove('is-onscreen');\n      emptyMsg.remove();\n\n      // old\n      //   nameEmptyError.classList.remove('is-onscreen');\n    }, 5000);\n\n    return false;\n  } else {\n    refs.textInput.style.borderColor = '';\n\n    //   remove empty HTML error!\n\n    //   nameEmptyError.classList.remove('is-onscreen');\n    // nameEmptyError.classList.add('visually-hidden');\n\n    if (msgTimeoutId) clearTimeout(msgTimeoutId);\n\n    return true;\n  }\n}\n\nexport function formSubmit(event) {\n  event.preventDefault();\n  const form = event.target;\n  const isMsgFilled = msgCheck();\n  const isEmailValid = emailCheck();\n\n  if (!isEmailValid) {\n    if (refs.emailInput.value === '') {\n      triggerShake(refs.emptyErrorMsg);\n    } else {\n      triggerShake(refs.emailErrorMsg);\n    }\n  }\n\n  if (!isMsgFilled) {\n    triggerShake(refs.emptyErrorMsg);\n  }\n\n  form.reset();\n}\n\nexport function triggerShake(el) {\n  el.classList.add('shake');\n  setTimeout(() => {\n    el.classList.remove('shake');\n  }, 350);\n}\n","import { emailCheck, msgCheck, formSubmit } from './form-check-logic';\nimport { refs } from './refs';\n\nrefs.emailInput.addEventListener('blur', emailCheck);\nrefs.textInput.addEventListener('blur', msgCheck);\nrefs.form.addEventListener('submit', formSubmit);\n"],"names":["emailErrorMsg","emptyErrorMsg","refs","msgTimeoutId","emailTimeoutId","emailCheck","correctEmailRule","existingError","emptyMsg","errorMsg","msgCheck","formSubmit","event","form","isMsgFilled","triggerShake","el"],"mappings":"AAAO,MAAMA,EAAgB,sEAChBC,EAAgB,6ECDtB,IAAIC,EAAO,CAChB,KAAM,SAAS,cAAc,gBAAgB,EAC7C,WAAY,SAAS,eAAe,WAAW,EAC/C,UAAW,SAAS,eAAe,SAAS,EAC5C,cAAe,SAAS,cAAc,uBAAuB,EAC7D,cAAe,SAAS,cAAc,uBAAuB,CAC/D,ECHIC,EAAe,KACfC,EAAiB,KAEd,SAASC,GAAa,CAC3B,MAAMC,EAAmB,WAAW,MAAM,MACxC,iDACD,EAEKC,EAAgBL,EAAK,WAAW,cAAc,cAClD,uBACD,EAGD,GAFIK,GAAeA,EAAc,OAAQ,EAErCL,EAAK,WAAW,QAAU,GAAI,CAChCA,EAAK,WAAW,MAAM,YAAc,SAGpCA,EAAK,WAAW,mBAAmB,WAAYD,CAAa,EAC5D,MAAMO,EAAWN,EAAK,WAAW,cAAc,cAC7C,uBACD,EACD,gBAAS,UAAU,IAAI,aAAa,EAOhCE,GAAgB,aAAaA,CAAc,EAC/CA,EAAiB,WAAW,IAAM,CAChCF,EAAK,WAAW,MAAM,YAAc,GAGpCM,EAAS,UAAU,OAAO,aAAa,EACvCA,EAAS,OAAQ,CAKlB,EAAE,GAAI,EAEA,EACX,KAAS,IAAKF,EA8BV,kBAAW,MAAM,YAAc,GAO3BF,GAAgB,aAAaA,CAAc,EAExC,GAvCqB,CAC5BF,EAAK,WAAW,MAAM,YAAc,SAGpCA,EAAK,WAAW,mBAAmB,WAAYF,CAAa,EAC5D,MAAMS,EAAWP,EAAK,WAAW,cAAc,cAC7C,uBACD,EACD,OAAAO,EAAS,UAAU,IAAI,aAAa,EAOhCL,GAAgB,aAAaA,CAAc,EAC/CA,EAAiB,WAAW,IAAM,CAChCF,EAAK,WAAW,MAAM,YAAc,GAGpCO,EAAS,UAAU,OAAO,aAAa,EACvCA,EAAS,OAAQ,CAKlB,EAAE,GAAI,EAEA,EACX,EAYA,CAEO,SAASC,GAAW,CACzB,MAAMH,EAAgBL,EAAK,UAAU,cAAc,cACjD,uBACD,EAGD,GAFIK,GAAeA,EAAc,OAAQ,EAErCL,EAAK,UAAU,MAAM,KAAI,IAAO,GAAI,CACtCA,EAAK,UAAU,MAAM,YAAc,SAGnCA,EAAK,UAAU,mBAAmB,WAAYD,CAAa,EAC3D,MAAMO,EAAWN,EAAK,UAAU,cAAc,cAC5C,uBACD,EACD,OAAAM,EAAS,UAAU,IAAI,aAAa,EAMhCL,GAAc,aAAaA,CAAY,EAC3CA,EAAe,WAAW,IAAM,CAC9BD,EAAK,UAAU,MAAM,YAAc,GAGnCM,EAAS,UAAU,OAAO,aAAa,EACvCA,EAAS,OAAQ,CAIlB,EAAE,GAAI,EAEA,EACX,KACI,QAAAN,EAAK,UAAU,MAAM,YAAc,GAO/BC,GAAc,aAAaA,CAAY,EAEpC,EAEX,CAEO,SAASQ,EAAWC,EAAO,CAChCA,EAAM,eAAgB,EACtB,MAAMC,EAAOD,EAAM,OACbE,EAAcJ,EAAU,EACTL,EAAY,IAG3BH,EAAK,WAAW,QAAU,GAC5Ba,EAAab,EAAK,aAAa,EAE/Ba,EAAab,EAAK,aAAa,GAI9BY,GACHC,EAAab,EAAK,aAAa,EAGjCW,EAAK,MAAO,CACd,CAEO,SAASE,EAAaC,EAAI,CAC/BA,EAAG,UAAU,IAAI,OAAO,EACxB,WAAW,IAAM,CACfA,EAAG,UAAU,OAAO,OAAO,CAC5B,EAAE,GAAG,CACR,CC9JAd,EAAK,WAAW,iBAAiB,OAAQG,CAAU,EACnDH,EAAK,UAAU,iBAAiB,OAAQQ,CAAQ,EAChDR,EAAK,KAAK,iBAAiB,SAAUS,CAAU"}