const g='<div class="form-email-error-msg">Please, enter correct email</div>',u='<div class="form-error-empty-msg is-onscreen">This field is required</div>';let e={form:document.querySelector(".feedback-form"),emailInput:document.getElementById("userEmail"),textInput:document.getElementById("userMsg"),emailErrorMsg:document.querySelector(".form-email-error-msg"),emptyErrorMsg:document.querySelector(".form-error-empty-msg")},i=null,m=null,c=null;function y(){const r=e.emailInput.value.match(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/);if(e.emailInput.value===""){const t=e.emailInput.parentElement.querySelector(".form-error-empty-msg");t&&t.remove(),e.emailInput.style.borderColor="tomato",e.emailInput.insertAdjacentHTML("afterend",u);const o=e.emailInput.parentElement.querySelector(".form-error-empty-msg");return o.classList.add("is-onscreen"),m&&clearTimeout(m),m=setTimeout(()=>{e.emailInput.style.borderColor="",o.classList.remove("is-onscreen"),o.remove()},5e3),!1}else{if(r)return e.emailInput.style.borderColor="",m&&clearTimeout(m),!0;{const t=e.emailInput.parentElement.querySelector(".form-email-error-msg");t&&t.remove(),e.emailInput.style.borderColor="tomato",e.emailInput.insertAdjacentHTML("afterend",g);const o=e.emailInput.parentElement.querySelector(".form-email-error-msg");return o.classList.add("is-onscreen"),m&&clearTimeout(m),m=setTimeout(()=>{e.emailInput.style.borderColor="",o.classList.remove("is-onscreen"),o.remove()},5e3),!1}}}function E(){if(e.textInput.value.trim()===""){const r=e.textInput.parentElement.querySelector(".form-error-empty-msg");r&&r.remove(),e.textInput.style.borderColor="tomato",e.textInput.insertAdjacentHTML("afterend",u);const t=e.textInput.parentElement.querySelector(".form-error-empty-msg");return t.classList.add("is-onscreen"),i&&clearTimeout(i),i=setTimeout(()=>{e.textInput.style.borderColor="",t.classList.remove("is-onscreen"),t.remove()},5e3),!1}else return e.textInput.style.borderColor="",i&&clearTimeout(i),!0}function v(r){r.preventDefault();const t=e.form,o=E();if(!y())if(e.emailInput.value===""){const n=e.emailInput.parentElement.querySelector(".form-error-empty-msg");n&&n.remove(),e.emailInput.insertAdjacentHTML("afterend",u),f(".form-error-empty-msg",e.emailInput.parentElement,l=>{p(l)})}else{const n=e.emailInput.parentElement.querySelector(".form-email-error-msg");n&&n.remove(),e.emailInput.insertAdjacentHTML("afterend",g),f(".form-email-error-msg",e.emailInput.parentElement,l=>{p(l)})}if(!o){const n=e.textInput.parentElement.querySelector(".form-error-empty-msg");n&&n.remove(),e.textInput.insertAdjacentHTML("afterend",u),f(".form-error-empty-msg",e.textInput.parentElement,l=>{p(l)}),c&&clearTimeout(c),c=setTimeout(()=>{e.textInput.parentElement.querySelector(".form-error-empty-msg").remove()},5e3)}t.reset()}function f(r,t,o){new MutationObserver((n,l)=>{const I=t.querySelector(r);I&&(l.disconnect(),o(I))}).observe(t,{childList:!0,subtree:!0})}function p(r){r.classList.add("shake"),setTimeout(()=>{r.classList.remove("shake")},350)}const d="feedback-form-state",a=e.form,S=e.emailInput,b=e.textInput;x();S.addEventListener("blur",y);b.addEventListener("blur",E);a.addEventListener("submit",v);a.addEventListener("submit",L);a.addEventListener("focusout",T);function L(r){r.preventDefault();const t=r.currentTarget;localStorage.removeItem(d),t.reset()}function T(r){const t=r.currentTarget,o=new FormData(t),s=Object.fromEntries(o.entries());console.log(" handleFormInput res:",s),localStorage.setItem(d,JSON.stringify(s))}function x(){const r=localStorage.getItem(d);if(r)try{const t=JSON.parse(r),o=new FormData(a),s=Array.from(o.keys());console.log(" refreshInputValue formFields:",s),s.forEach(n=>{a.elements[n].value=t[n]})}catch{alert("Ooops... something went wrong")}}
//# sourceMappingURL=2-form-Be_jlBmS.js.map
