import"./assets/main-DxOmx7x6.js";const I='<div class="form-email-error-msg">Please, enter correct email</div>',u='<div class="form-error-empty-msg is-onscreen">This field is required</div>';let e={form:document.querySelector(".feedback-form"),emailInput:document.getElementById("userEmail"),textInput:document.getElementById("userMsg"),emailErrorMsg:document.querySelector(".form-email-error-msg"),emptyErrorMsg:document.querySelector(".form-error-empty-msg")};const c="feedback-form-state",g=e.form;let i=null,s=null,f=null;function y(){const o=e.emailInput.value.match(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/);if(e.emailInput.value===""){const t=e.emailInput.parentElement.querySelector(".form-error-empty-msg");t&&t.remove(),e.emailInput.style.borderColor="tomato",e.emailInput.insertAdjacentHTML("afterend",u);const r=e.emailInput.parentElement.querySelector(".form-error-empty-msg");return r.classList.add("is-onscreen"),s&&clearTimeout(s),s=setTimeout(()=>{e.emailInput.style.borderColor="",r.classList.remove("is-onscreen"),r.remove()},5e3),!1}else{if(o)return e.emailInput.style.borderColor="",s&&clearTimeout(s),!0;{const t=e.emailInput.parentElement.querySelector(".form-email-error-msg");t&&t.remove(),e.emailInput.style.borderColor="tomato",e.emailInput.insertAdjacentHTML("afterend",I);const r=e.emailInput.parentElement.querySelector(".form-email-error-msg");return r.classList.add("is-onscreen"),s&&clearTimeout(s),s=setTimeout(()=>{e.emailInput.style.borderColor="",r.classList.remove("is-onscreen"),r.remove()},5e3),!1}}}function E(){if(e.textInput.value.trim()===""){const o=e.textInput.parentElement.querySelector(".form-error-empty-msg");o&&o.remove(),e.textInput.style.borderColor="tomato",e.textInput.insertAdjacentHTML("afterend",u);const t=e.textInput.parentElement.querySelector(".form-error-empty-msg");return t.classList.add("is-onscreen"),i&&clearTimeout(i),i=setTimeout(()=>{e.textInput.style.borderColor="",t.classList.remove("is-onscreen"),t.remove()},5e3),!1}else return e.textInput.style.borderColor="",i&&clearTimeout(i),!0}function S(o){o.preventDefault();const t=o.currentTarget,r=E(),l=y();if(localStorage.removeItem(c),!l)if(e.emailInput.value===""){const n=e.emailInput.parentElement.querySelector(".form-error-empty-msg");n&&n.remove(),e.emailInput.insertAdjacentHTML("afterend",u),p(".form-error-empty-msg",e.emailInput.parentElement,m=>{d(m)})}else{const n=e.emailInput.parentElement.querySelector(".form-email-error-msg");n&&n.remove(),e.emailInput.insertAdjacentHTML("afterend",I),p(".form-email-error-msg",e.emailInput.parentElement,m=>{d(m)})}if(!r){const n=e.textInput.parentElement.querySelector(".form-error-empty-msg");n&&n.remove(),e.textInput.insertAdjacentHTML("afterend",u),p(".form-error-empty-msg",e.textInput.parentElement,m=>{d(m)}),f&&clearTimeout(f),f=setTimeout(()=>{e.textInput.parentElement.querySelector(".form-error-empty-msg").remove()},5e3)}if(!r||!l)return;const a=localStorage.getItem(c);if(a)try{const n=JSON.parse(a);console.log("Submitted data:",n)}catch{console.log("Submitted data: <invalid JSON>")}else console.log("Please, fill all fields");t.reset()}function b(o){const t=o.currentTarget,r=new FormData(t),l=Array.from(r.entries()).filter(([a,n])=>n&&n.trim()!=="");if(l.length>0){const a=Object.fromEntries(l);localStorage.setItem(c,JSON.stringify(a))}else localStorage.removeItem(c)}function L(){const o=localStorage.getItem(c);if(o)try{const t=JSON.parse(o);Object.keys(t).forEach(r=>{g.elements[r]&&t[r]!==void 0&&t[r]!==""&&(g.elements[r].value=t[r])})}catch{alert("Ooops... something went wrong")}}function p(o,t,r){new MutationObserver((a,n)=>{const m=t.querySelector(o);m&&(n.disconnect(),r(m))}).observe(t,{childList:!0,subtree:!0})}function d(o){o.classList.add("shake"),setTimeout(()=>{o.classList.remove("shake")},350)}const v=e.form,T=e.emailInput,x=e.textInput;L();T.addEventListener("blur",y);x.addEventListener("blur",E);v.addEventListener("submit",S);v.addEventListener("focusout",b);
//# sourceMappingURL=2-form.js.map
